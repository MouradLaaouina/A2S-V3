<!-- ================= NAVBAR A2S â€“ composant autonome (HTML+CSS+JS) ================= -->
<link rel="preload" as="image" href="images/logo principal.png" />

<style>
  /* ===== Variables minimales (adaptables) ===== */
  :root{
    --brand: #2f6b2f;
    --brand-2:#4a9d4a;
    --brand-3:#00e676;

    --nav-bg: rgba(255,255,255,0.85);
    --nav-border: rgba(0,230,118,0.28);
    --nav-chip: rgba(0,0,0,0.04);

    --text:#0b0b0b;
    --surface:#ffffff;
    --elev:#ffffff;

    --r-md:.65rem; --r-xl:20px;
    --sh-lg:0 12px 28px -8px rgb(0 0 0 / .18);
    --t-fast:150ms ease; --t:280ms ease;

    --nav-h: 72px;
  }
  html[data-theme="dark"]{
    --nav-bg: rgba(26,26,26,0.85);
    --nav-border: rgba(0,230,118,0.22);
    --nav-chip: rgba(255,255,255,0.06);

    --text:#ffffff;
    --surface:#1a1a1a;
    --elev:#141414;
  }

  /* ===== Barre ===== */
  .nav{ position:fixed; inset:0 0 auto 0; z-index:1000; }
  .nav__bar{
    display:flex; align-items:center; justify-content:space-between; gap:.75rem;
    width:100%; padding:.75rem clamp(16px, 4vw, 32px);
    background:var(--nav-bg); backdrop-filter:saturate(120%) blur(16px);
    -webkit-backdrop-filter:saturate(120%) blur(16px);
    border-bottom:1px solid var(--nav-border); box-shadow:var(--sh-lg);
  }

  /* ===== Marque ===== */
  .brand{ display:flex; align-items:center; gap:.6rem; text-decoration:none; color:inherit; }
  .brand__logo-wrap{ width:42px; height:42px; display:grid; place-items:center; border-radius:999px; background:var(--nav-chip); border:1px solid var(--nav-border); overflow:hidden; }
  .brand__logo{ width:28px; height:28px; object-fit:contain; }
  .brand__name{ font-weight:800; letter-spacing:.2px; font-size:14px; color:var(--text); }

  /* ===== Menu desktop ===== */
  nav[aria-label="Navigation principale"]{ display:block; }
  .nav__menu{ display:flex; align-items:center; gap:.25rem; list-style:none; margin:0; padding:0; }
  .nav__item{ position:relative; }
  .nav__btn,.nav__link{
    display:flex; align-items:center; gap:.35rem; min-height:44px; min-width:44px;
    padding:.55rem .7rem; border-radius:.65rem; border:1px solid transparent;
    background:var(--nav-chip); color:var(--text); text-decoration:none; font-weight:600; transition:var(--t-fast);
    cursor:pointer;
  }
  .nav__btn:hover,.nav__link:hover{ transform:translateY(-2px); border-color:var(--nav-border); color:var(--brand-3); }

  /* ===== Dropdown ===== */
  .dropdown{
    position:absolute; left:0; top:calc(100% + 10px); min-width:260px; background:var(--elev);
    border:1px solid var(--nav-border); border-radius:var(--r-xl); box-shadow:var(--sh-lg);
    opacity:0; transform:translateY(-6px); pointer-events:none; transition:var(--t-fast); padding:.5rem;
  }
  .nav__item[aria-expanded="true"]>.dropdown{ opacity:1; transform:translateY(0); pointer-events:auto; }
  .dropdown a{ display:flex; gap:.6rem; align-items:center; padding:.6rem .7rem; border-radius:.6rem; color:var(--text); text-decoration:none; }
  .dropdown a:hover{ background:color-mix(in srgb, var(--brand-3) 12%, transparent); color:var(--brand); transform:translateX(4px); }

  /* ===== Outils ===== */
  .nav__tools{ display:flex; align-items:center; gap:.5rem; }
  .theme-toggle{
    display:inline-grid; place-items:center; width:36px; height:36px; border-radius:999px;
    border:1px solid var(--nav-border); background:var(--nav-chip); cursor:pointer; transition:var(--t-fast);
  }
  .theme-toggle:hover{ background:var(--brand-3); color:#fff; border-color:var(--brand-3); transform:rotate(180deg); }

  /* ===== Burger ===== */
  .burger{ display:none; padding:.6rem; border-radius:.6rem; border:1px solid var(--nav-border); background:var(--nav-chip); cursor:pointer; }
  .burger span{ display:block; width:22px; height:2px; background:currentColor; transition: transform .3s ease, opacity .3s ease; }
  .burger span+span{ margin-top:5px; }
  .burger.active span:nth-child(1){ transform: translateY(7px) rotate(45deg); }
  .burger.active span:nth-child(2){ opacity:0; }
  .burger.active span:nth-child(3){ transform: translateY(-7px) rotate(-45deg); }

  /* ===== Panneau mobile ===== */
  .panel{
    position:fixed; inset:0; z-index:950; background:var(--elev); backdrop-filter:blur(18px);
    display:grid; grid-template-rows:auto 1fr auto;
    padding:calc(env(safe-area-inset-top) + var(--nav-h)) 20px 20px;
    opacity:0; transform:translateX(-100%); pointer-events:none; transition:var(--t); overflow-y:auto;
  }
  .panel--open{ opacity:1; transform:translateX(0); pointer-events:auto; box-shadow:var(--sh-lg); }
  .panel__section{ border:1px solid var(--nav-border); border-radius:var(--r-xl); background:var(--surface); overflow:hidden; margin-bottom:12px; }
  .panel__trigger{ width:100%; display:flex; justify-content:space-between; align-items:center; gap:.5rem; padding:16px 18px; border:0; background:none; color:var(--text); font-weight:800; cursor:pointer; min-height:54px; font-size:1.05rem; }
  .panel__content{ max-height:0; overflow:hidden; transition:max-height var(--t); }
  .panel__section[aria-expanded="true"] .panel__content{ max-height:520px; }
  .panel a.nav__link{ display:block; margin:8px 12px; padding:14px 16px; border-radius:.65rem; border:1px solid transparent; }
  .panel a.nav__link:hover{ border-color:var(--nav-border); background:color-mix(in srgb, var(--brand-3) 8%, transparent); }

  /* ===== Responsive ===== */
  @media (max-width:960px){
    .nav__menu{ display:none; }
    .burger{ display:inline-flex; flex-direction:column; align-items:center; justify-content:center; }
    .nav__bar{ gap:.5rem; }
    .brand__name{ font-size:.95rem; }
  }
  @media (orientation: landscape) and (max-width: 960px){
    .nav__bar{ padding:.55rem .75rem; }
    .brand__name{ display:none; }
    .panel{ padding-top:calc(env(safe-area-inset-top) + var(--nav-h)); }
  }
</style>

<header class="nav" id="a2s-navbar">
  <div class="nav__bar" role="navigation">
    <!-- Marque -->
    <a class="brand" href="/" aria-label="Accueil â€“ ALLIANCE SYNERGIE SANTÃ‰">
      <span class="brand__logo-wrap">
        <img class="brand__logo" src="images/logo principal.png" alt="Logo A2S">
      </span>
      <span class="brand__name">ALLIANCE SYNERGIE SANTÃ‰</span>
    </a>

    <!-- Menu -->
    <nav aria-label="Navigation principale">
      <ul class="nav__menu">
        <li class="nav__item" aria-expanded="false">
          <button class="nav__btn" type="button" data-dropdown="produits">Produits
            <svg width="12" height="12" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
          </button>
          <div class="dropdown" id="dropdown-produits" role="menu" aria-label="Sous-menu Produits">
            <a href="#dwhite"><span>ðŸ§´</span> D-WHITE</a>
            <a href="#dcap"><span>ðŸ’Š</span> D-CAP</a>
            <a href="#gels"><span>ðŸ«§</span> Gels & Soins</a>
          </div>
        </li>

        <li class="nav__item"><a class="nav__link" href="#impact">Notre impact</a></li>
        <li class="nav__item"><a class="nav__link" href="#univers">Univers</a></li>
        <li class="nav__item"><a class="nav__link" href="#contact">Contact</a></li>

        <li class="nav__item">
          <a class="nav__link" href="#rdv" style="background:var(--brand-3); color:#061e0f; font-weight:800;">Prendre RDV</a>
        </li>
      </ul>
    </nav>

    <!-- Outils -->
    <div class="nav__tools">
      <button class="theme-toggle" type="button" id="themeToggle" aria-label="Basculer thÃ¨me">
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M12 3a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0V4a1 1 0 0 1 1-1m7 9a7 7 0 1 1-7-7a1 1 0 0 1 0 2a5 5 0 1 0 5 5a1 1 0 0 1 2 0M4 13H2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2m18 0h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2m-8 8a1 1 0 0 1-1-1v-2a1 1 0 1 1 2 0v2a1 1 0 0 1-1 1Z"/></svg>
      </button>

      <button class="burger" id="burgerBtn" aria-label="Ouvrir le menu" aria-expanded="false" aria-controls="mobilePanel">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>

  <!-- Panneau mobile -->
  <aside class="panel" id="mobilePanel" aria-hidden="true">
    <section class="panel__section" aria-expanded="false">
      <button class="panel__trigger" type="button">
        Produits
        <span aria-hidden="true">â–¾</span>
      </button>
      <div class="panel__content">
        <a class="nav__link" href="#dwhite">ðŸ§´ D-WHITE</a>
        <a class="nav__link" href="#dcap">ðŸ’Š D-CAP</a>
        <a class="nav__link" href="#gels">ðŸ«§ Gels & Soins</a>
      </div>
    </section>

    <section class="panel__section" aria-expanded="true">
      <button class="panel__trigger" type="button">
        Navigation
        <span aria-hidden="true">â–¾</span>
      </button>
      <div class="panel__content" style="max-height:520px">
        <a class="nav__link" href="#impact">Notre impact</a>
        <a class="nav__link" href="#univers">Univers</a>
        <a class="nav__link" href="#contact">Contact</a>
        <a class="nav__link" href="#rdv">Prendre RDV</a>
      </div>
    </section>
  </aside>
</header>

<script>
/* =================== NAVBAR A2S â€“ logique =================== */
(() => {
  const root = document.documentElement;

  // 1) Hauteur nav -> variable CSS (+ padding auto si dÃ©sirÃ©)
  const navEl = document.getElementById('a2s-navbar');
  const setNavHeight = () => {
    const h = navEl?.querySelector('.nav__bar')?.offsetHeight || 72;
    root.style.setProperty('--nav-h', h + 'px');
  };
  setNavHeight();
  window.addEventListener('resize', setNavHeight);

  // 2) Dropdown desktop (hover + clavier)
  const items = Array.from(document.querySelectorAll('.nav__item'));
  const closeAll = () => items.forEach(i => i.setAttribute('aria-expanded', 'false'));

  items.forEach((item) => {
    const btn = item.querySelector('[data-dropdown]');
    if(!btn) return;

    const id = btn.getAttribute('data-dropdown');
    const panel = document.getElementById(`dropdown-${id}`);

    // Click / focus
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const open = item.getAttribute('aria-expanded') === 'true';
      closeAll();
      item.setAttribute('aria-expanded', String(!open));
    });

    // Fermer en dehors
    document.addEventListener('click', (e) => {
      if(!item.contains(e.target)) item.setAttribute('aria-expanded', 'false');
    });

    // Ã‰chappe
    item.addEventListener('keydown', (e) => {
      if(e.key === 'Escape'){ item.setAttribute('aria-expanded','false'); btn.focus(); }
      if(e.key === 'ArrowDown' && panel){ item.setAttribute('aria-expanded','true'); panel.querySelector('a')?.focus(); }
    });
  });

  // 3) Panneau mobile
  const burger = document.getElementById('burgerBtn');
  const mobile = document.getElementById('mobilePanel');

  const openMobile = () => {
    burger.classList.add('active');
    burger.setAttribute('aria-expanded','true');
    mobile.classList.add('panel--open');
    mobile.setAttribute('aria-hidden','false');
    document.body.style.overflow = 'hidden';
  };
  const closeMobile = () => {
    burger.classList.remove('active');
    burger.setAttribute('aria-expanded','false');
    mobile.classList.remove('panel--open');
    mobile.setAttribute('aria-hidden','true');
    document.body.style.overflow = '';
  };

  burger.addEventListener('click', () => {
    const isOpen = mobile.classList.contains('panel--open');
    isOpen ? closeMobile() : openMobile();
  });

  // Fermer au clic extÃ©rieur (sur fond du panneau)
  mobile.addEventListener('click', (e) => {
    if(e.target === mobile) closeMobile();
  });

  // Ã‰chappe
  window.addEventListener('keydown', (e) => {
    if(e.key === 'Escape' && mobile.classList.contains('panel--open')) closeMobile();
  });

  // AccordÃ©ons du panneau
  document.querySelectorAll('.panel__section .panel__trigger').forEach((t) => {
    t.addEventListener('click', () => {
      const section = t.closest('.panel__section');
      const isOpen = section.getAttribute('aria-expanded') === 'true';
      section.setAttribute('aria-expanded', String(!isOpen));
    });
  });

  // Fermer panneau quand on navigue vers une ancre
  mobile.querySelectorAll('a.nav__link').forEach(a => {
    a.addEventListener('click', () => closeMobile());
  });

  // 4) Theme toggle â€“ utilise une fonction globale si prÃ©sente, sinon fallback local
  const themeBtn = document.getElementById('themeToggle');

  const getInitialTheme = () => {
    const stored = localStorage.getItem('a2s-theme');
    if (stored) return stored;
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  };
  const applyTheme = (t) => {
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('a2s-theme', t);
  };
  if(!document.documentElement.getAttribute('data-theme')){
    applyTheme(getInitialTheme());
  }
  themeBtn.addEventListener('click', () => {
    if (typeof window.toggleTheme === 'function') {
      window.toggleTheme(); // utilise le Theme Manager existant si prÃ©sent
    } else {
      const cur = document.documentElement.getAttribute('data-theme') || 'light';
      applyTheme(cur === 'light' ? 'dark' : 'light');
    }
  });

  // 5) Safe 100vh (iOS)
  const setVH = () => {
    root.style.setProperty('--vh', window.innerHeight * 0.01 + 'px');
  };
  setVH();
  window.addEventListener('resize', setVH);
})();
</script>
